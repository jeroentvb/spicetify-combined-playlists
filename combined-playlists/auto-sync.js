!async function(){for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(t=>setTimeout(t,10));(()=>{var t,e=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,s={},o=s,n={synchronizeCombinedPlaylists:()=>g};for(t in n)e(o,t,{get:n[t],enumerable:!0});var l=t=>`https://api.spotify.com/v1/playlists/${t}/tracks`,c="combined-playlists",y={name:Spicetify.Platform?.Translations["shared.library.entity-row.liked-songs.title"],collaborative:!1,description:"",external_urls:{spotify:""},href:"",id:"liked-songs-facade",images:[],owner:{display_name:"",external_urls:{spotify:""},href:"",id:"",type:"user",uri:""},public:!1,snapshot_id:"",tracks:{href:"",total:0},type:"playlist",uri:"spotify:playlist:liked-songs-facade"},p=new Map;async function f(t,i,e=!1){t=await Promise.all(t.map(async t=>{return t.id===y.id?m((await Spicetify.Platform.LibraryAPI.getTracks({limit:99999})).items):u(t.uri)})).then(t=>Array.from(new Set(t.flat())));const a=await u(i.uri);var r,t=t.filter(t=>!a.includes(t)),s=(r=100,t.reduce((t,e,i)=>{i=Math.floor(i/r);return t[i]||(t[i]=[]),t[i].push(e),t},[]));0<t.length&&e&&Spicetify.showNotification(`Auto-syncing ${t.length} missing tracks to playlist `+i.name),await Promise.all(s.map(t=>{return e=i.id,Spicetify.CosmosAsync.post(l(e),{uris:t});var e})),0<t.length&&(s=e?`Auto-synced ${t.length} missing tracks to playlist ${i.name} ðŸ”¥`:`Added ${t.length} tracks to playlist: `+i.name,Spicetify.showNotification(s))}async function u(t){var e=p.get(t);return e?Promise.resolve(e):(e=m((await Spicetify.Platform.PlaylistAPI.getContents(t)).items),p.set(t,e),e)}function m(t){return t.filter(t=>t.uri?.startsWith("spotify:track:")&&t.isPlayable).map(t=>t.uri)}var d={autoSync:!0};function g(){var t=JSON.parse(Spicetify.LocalStorage.get(c))??[];return Promise.all(t.map(({sources:t,target:e})=>f(t,e,!0))).catch(t=>{console.error("An error ocurred while auto-syncing playlists",t),Spicetify.showNotification("An error ocurred while auto-syncing playlists",!0)}).finally(()=>p.clear())}(async()=>{for(;!Spicetify?.Platform||!Spicetify?.CosmosAsync;)await new Promise(t=>setTimeout(t,100));(JSON.parse(Spicetify.LocalStorage.get("combined-playlists-settings")??"null")||d).autoSync&&g()})();var h=e({},"__esModule",{value:!0}),w=s,S=void 0,P=void 0;if(w&&"object"==typeof w||"function"==typeof w)for(let t of a(w))r.call(h,t)||t===S||e(h,t,{get:()=>w[t],enumerable:!(P=i(w,t))||P.enumerable})})()}();