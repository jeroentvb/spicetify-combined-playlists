!async function(){for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(t=>setTimeout(t,10));(()=>{var t,e=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,o={},s=o,n={synchronizeCombinedPlaylists:()=>d};for(t in n)e(s,t,{get:n[t],enumerable:!0});var l="combined-playlists",c={name:Spicetify.Platform?.Translations["shared.library.entity-row.liked-songs.title"],collaborative:!1,description:"",external_urls:{spotify:""},href:"",id:"liked-songs-facade",images:[],owner:{display_name:"",external_urls:{spotify:""},href:"",id:"",type:"user",uri:""},public:!1,snapshot_id:"",tracks:{href:"",total:0},type:"playlist",uri:"spotify:playlist:liked-songs-facade"},y=new Map;async function f(t,i,e=!1){t=await Promise.all(t.map(async t=>{return t.id===c.id?u((await Spicetify.Platform.LibraryAPI.getTracks({limit:99999})).items):p(t.uri)})).then(t=>Array.from(new Set(t.flat())));const a=await p(i.uri);var r,t=t.filter(t=>!a.includes(t)),o=(r=100,t.reduce((t,e,i)=>{i=Math.floor(i/r);return t[i]||(t[i]=[]),t[i].push(e),t},[]));0<t.length&&e&&Spicetify.showNotification(`Auto-syncing ${t.length} missing tracks to playlist `+i.name),await Promise.all(o.map(async e=>{return t=i.uri,Spicetify.Platform.PlaylistAPI.add(t,e,{}).then(()=>{var t=y.get(i.uri)||[];y.set(i.uri,[...t,...e])});var t})),0<t.length?(o=e?`Auto-synced ${t.length} missing tracks to playlist ${i.name} 🔥`:`Added ${t.length} tracks to playlist: `+i.name,Spicetify.showNotification(o)):e||Spicetify.showNotification(i.name+" is already up to date! 🎉")}async function p(t){var e=y.get(t);return e?Promise.resolve(e):(e=u((await Spicetify.Platform.PlaylistAPI.getContents(t)).items),y.set(t,e),e)}function u(t){return t.filter(t=>t.uri?.startsWith("spotify:track:")&&t.isPlayable).map(t=>t.uri)}var m={autoSync:!0};function d(){var t=JSON.parse(Spicetify.LocalStorage.get(l))??[];return Promise.all(t.map(({sources:t,target:e})=>f(t,e,!0))).catch(t=>{console.error("An error ocurred while auto-syncing playlists",t),Spicetify.showNotification("An error ocurred while auto-syncing playlists",!0)}).finally(()=>y.clear())}(async()=>{for(;!Spicetify?.Platform||!Spicetify?.CosmosAsync;)await new Promise(t=>setTimeout(t,100));(JSON.parse(Spicetify.LocalStorage.get("combined-playlists-settings")??"null")||m).autoSync&&d()})();var g=e({},"__esModule",{value:!0}),h=o,w=void 0,P=void 0;if(h&&"object"==typeof h||"function"==typeof h)for(let t of a(h))r.call(g,t)||t===w||e(g,t,{get:()=>h[t],enumerable:!(P=i(h,t))||P.enumerable})})()}();