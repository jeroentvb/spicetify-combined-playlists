!async function(){for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(t=>setTimeout(t,10));(()=>{var t,e=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,o={},r=o,n={synchronizeCombinedPlaylists:()=>h};for(t in n)e(r,t,{get:n[t],enumerable:!0});var l=t=>`sp://core-playlist/v1/playlist/${t}/rows`,c="sp://core-collection/unstable/@/list/tracks/all?responseFormat=protobufJson",p=t=>`https://api.spotify.com/v1/playlists/${t}/tracks`,y="combined-playlists",f={name:null==(w=Spicetify.Platform)?void 0:w.Translations["shared.library.entity-row.liked-songs.title"],collaborative:!1,description:"",external_urls:{spotify:""},href:"",id:"liked-songs-facade",images:[],owner:{display_name:"",external_urls:{spotify:""},href:"",id:"",type:"user",uri:""},public:!1,snapshot_id:"",tracks:{href:"",total:0},type:"playlist",uri:"spotify:playlist:liked-songs-facade"},u=new Map;async function m(t,i,e=!1){t=await Promise.all(t.map(async t=>t.id===f.id?Spicetify.CosmosAsync.get(c).then(t=>t.item.map(t=>t.trackMetadata.link)):d(t.uri))).then(t=>Array.from(new Set(t.flat())));const a=await d(i.uri);var s,t=t.filter(t=>!a.includes(t)),o=(s=100,t.reduce((t,e,i)=>{i=Math.floor(i/s);return t[i]||(t[i]=[]),t[i].push(e),t},[]));0<t.length&&e&&Spicetify.showNotification(`Auto-syncing ${t.length} missing tracks to playlist `+i.name),await Promise.all(o.map(t=>{return e=i.id,Spicetify.CosmosAsync.post(p(e),{uris:t});var e})),0<t.length&&(o=e?`Auto-synced ${t.length} missing tracks to playlist ${i.name} ðŸ”¥`:`Added ${t.length} tracks to playlist: `+i.name,Spicetify.showNotification(o))}async function d(t){var e=u.get(t);return e?Promise.resolve(e):(e=await Spicetify.CosmosAsync.get(l(t)).then(t=>t.rows.map(t=>t.link)),u.set(t,e),e)}var g={autoSync:!0};function h(){var t=null!=(t=JSON.parse(Spicetify.LocalStorage.get(y)))?t:[];return Promise.all(t.map(({sources:t,target:e})=>m(t,e,!0))).catch(t=>{console.error("An error ocurred while auto-syncing playlists",t),Spicetify.showNotification("An error ocurred while auto-syncing playlists",!0)}).finally(()=>u.clear())}(async()=>{for(;null==Spicetify||!Spicetify.Platform||null==Spicetify||!Spicetify.CosmosAsync;)await new Promise(t=>setTimeout(t,100));var t;(JSON.parse(null!=(t=Spicetify.LocalStorage.get("combined-playlists-settings"))?t:"null")||g).autoSync&&h()})();var w=o,S=e({},"__esModule",{value:!0}),v=w,b=void 0,P=void 0;if(v&&"object"==typeof v||"function"==typeof v)for(let t of a(v))s.call(S,t)||t===b||e(S,t,{get:()=>v[t],enumerable:!(P=i(v,t))||P.enumerable})})()}();