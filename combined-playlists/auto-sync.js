!async function(){for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(t=>setTimeout(t,10));(()=>{var t,e=Object.defineProperty,i=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,a={},r=a,n={synchronizeCombinedPlaylists:()=>d};for(t in n)e(r,t,{get:n[t],enumerable:!0});var l=t=>`sp://core-playlist/v1/playlist/${t}/rows`,c="sp://core-collection/unstable/@/list/tracks/all?responseFormat=protobufJson",p=t=>`https://api.spotify.com/v1/playlists/${t}/tracks`,y="combined-playlists",f={name:null==(g=Spicetify.Platform)?void 0:g.Translations["shared.library.entity-row.liked-songs.title"],collaborative:!1,description:"",external_urls:{spotify:""},href:"",id:"liked-songs-facade",images:[],owner:{display_name:"",external_urls:{spotify:""},href:"",id:"",type:"user",uri:""},public:!1,snapshot_id:"",tracks:{href:"",total:0},type:"playlist",uri:"spotify:playlist:liked-songs-facade"};async function u(t,i,e=!1){t=await Promise.all(t.map(async t=>t.id===f.id?Spicetify.CosmosAsync.get(c).then(t=>t.item.map(t=>t.trackMetadata.link)):Spicetify.CosmosAsync.get(l(t.uri)).then(t=>t.rows.map(t=>t.link)))).then(t=>Array.from(new Set(t.flat())));const s=await Spicetify.CosmosAsync.get(l(i.uri)).then(t=>t.rows.map(({link:t})=>t));var o,t=t.filter(t=>!s.includes(t)),a=(o=100,t.reduce((t,e,i)=>{i=Math.floor(i/o);return t[i]||(t[i]=[]),t[i].push(e),t},[]));0<t.length&&e&&Spicetify.showNotification(`Auto-syncing ${t.length} missing tracks to playlist `+i.name),await Promise.all(a.map(t=>{return e=i.id,Spicetify.CosmosAsync.post(p(e),{uris:t});var e})),0<t.length&&(a=e?`Auto-synced ${t.length} missing tracks to playlist ${i.name} ðŸ”¥`:`Added ${t.length} tracks to playlist: `+i.name,Spicetify.showNotification(a))}var m={autoSync:!0};function d(){var t=null!=(t=JSON.parse(Spicetify.LocalStorage.get(y)))?t:[];return Promise.all(t.map(({sources:t,target:e})=>u(t,e,!0))).catch(t=>{console.error("An error ocurred while auto-syncing playlists",t),Spicetify.showNotification("An error ocurred while auto-syncing playlists",!0)})}(async()=>{for(;null==Spicetify||!Spicetify.Platform||null==Spicetify||!Spicetify.CosmosAsync;)await new Promise(t=>setTimeout(t,100));var t;(JSON.parse(null!=(t=Spicetify.LocalStorage.get("combined-playlists-settings"))?t:"null")||m).autoSync&&d()})();var g=a,h=e({},"__esModule",{value:!0}),S=g,w=void 0,b=void 0;if(S&&"object"==typeof S||"function"==typeof S)for(let t of s(S))o.call(h,t)||t===w||e(h,t,{get:()=>S[t],enumerable:!(b=i(S,t))||b.enumerable})})()}();